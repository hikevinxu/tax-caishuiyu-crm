(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-208d"],{CE3F:function(e,t,n){"use strict";var o=n("Q4iH");n.n(o).a},Q4iH:function(e,t,n){},U01L:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return r}),n.d(t,"a",function(){return c}),n.d(t,"m",function(){return d}),n.d(t,"k",function(){return u}),n.d(t,"l",function(){return p}),n.d(t,"n",function(){return m}),n.d(t,"h",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"f",function(){return v}),n.d(t,"g",function(){return g}),n.d(t,"i",function(){return b}),n.d(t,"j",function(){return w});var o=n("DG18"),i=n("Qyje"),a=n.n(i);function s(e){return Object(o.b)("/opUser/index",e)}function l(e){return Object(o.b)("/opUser/save",e)}function r(e){return Object(o.b)("/opUser/status",e)}function c(e){return Object(o.a)("/opUser/allLdapUsers",e)}function d(e){return Object(o.b)("/role/saveUserRoles",e)}function u(e){return Object(o.a)("/role/allRoles",e)}function p(e){return Object(o.b)("/role/save",e)}function m(e){return Object(o.b)("/role/updateStatus",e)}function f(e){return Object(o.a)("/permission/allPermissions",e)}function h(e){return Object(o.b)("/performance/index",e)}function v(e){var t=a.a.stringify(e);return Object(o.b)("/performance/person/detail",t)}function g(e){return Object(o.b)("/performance/person/index",e)}function b(e){return Object(o.a)("/permission/obtainPermissions",e)}function w(e){return Object(o.b)("/permission/saveRolePermissions",e)}},Y5bG:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),Math.easeInOutQuad=function(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t};var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function i(e,t,n){var i=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,a=e-i,s=0;t=void 0===t?500:t;!function e(){s+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(s,i,a,t)),s<t?o(e):n&&"function"==typeof n&&n()}()}},ZySA:function(e,t,n){"use strict";var o=n("P2sY"),i=n.n(o),a=(n("jUE0"),{bind:function(e,t){e.addEventListener("click",function(n){var o=i()({},t.value),a=i()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},o),s=a.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var l=s.getBoundingClientRect(),r=s.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":((r=document.createElement("span")).className="waves-ripple",r.style.height=r.style.width=Math.max(l.width,l.height)+"px",s.appendChild(r)),a.type){case"center":r.style.top=l.height/2-r.offsetHeight/2+"px",r.style.left=l.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(n.pageY-l.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(n.pageX-l.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=a.color,r.className="waves-ripple z-active",!1}},!1)}}),s=function(e){e.directive("waves",a)};window.Vue&&(window.waves=a,Vue.use(s)),a.install=s;t.a=a},jUE0:function(e,t,n){},y06q:function(e,t,n){"use strict";n.r(t);var o=n("ZySA"),i=n("Mz3J"),a=n("U01L"),s={components:{Pagination:i.a},directives:{waves:o.a},data:function(){return{listLoading:!1,listData:[{name:"小明",quanxian:"123",account:"zhenhua.xu@kongapi.com",phone:"15515268707",status:1}],total:0,listQuery:{pageNum:1,pageSize:10},addForm:{name:"",phone:"",roleIds:[],email:""},emailList:[],allRolesList:[],addDialog:!1}},created:function(){this.getList(),this.getRoleList(),this.opUserAllLdapUsers()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(a.b)(this.listQuery).then(function(t){0==t.code&&(e.listData=t.data.items,e.total=t.data.total,e.listData=e.listData.map(function(t){var n=[],o=[];return t.roles.map(function(e){o.push(e.id),n.push(e.roleName)}),e.$set(t,"edit",!1),e.$set(t,"roleNames",n.join(",")),e.$set(t,"roleIds",o),t.originalRoleIds=o,t}),e.listLoading=!1)})},opUserAllLdapUsers:function(){var e=this;Object(a.a)().then(function(t){0==t.code&&(e.emailList=t.data)})},getRoleList:function(){var e=this;Object(a.k)().then(function(t){0==t.code&&(e.allRolesList=t.data)})},cancelEdit:function(e){e.roleIds=e.originalRoleIds,e.edit=!1,this.$message({message:"职位角色取消修改",type:"warning"})},confirmEdit:function(e){var t=this;e.edit=!1;var n={opUserId:e.id,roleIds:e.roleIds};Object(a.m)(n).then(function(e){0==e.code&&(t.getList(),t.$message({message:"职位角色修改成功",type:"success"}))})},resetForm:function(){this.addForm={name:"",phone:"",roleIds:[],email:""}},openAddDataDialog:function(){this.resetForm(),this.addDialog=!0},addData:function(){var e=this;console.log(this.addForm),""!=this.addForm.name?""!=this.addForm.phone?0!=this.addForm.roleIds.length?""!=this.addForm.email?Object(a.c)(this.addForm).then(function(t){0==t.code&&(e.$notify({title:"成功",message:"添加成功",type:"success",duration:1e3}),e.addDialog=!1,e.getList())}):this.$message({message:"请先选择邮箱账号",type:"error",showClose:!0,duration:1e3}):this.$message({message:"请先选择至少一种职位角色",type:"error",showClose:!0,duration:1e3}):this.$message({message:"请先输入工作手机号",type:"error",showClose:!0,duration:1e3}):this.$message({message:"请先输入姓名",type:"error",showClose:!0,duration:1e3})},handleModifyStatus:function(e,t){var n=this;if("up"==t){var o={id:e.id,status:1};Object(a.d)(o).then(function(e){0==e.code&&(n.$notify({title:"成功",message:"启用成功",type:"success",duration:1e3}),n.getList())})}if("down"==t){var i={id:e.id,status:0};Object(a.d)(i).then(function(e){0==e.code&&(n.$notify({title:"成功",message:"停用成功",type:"success",duration:1e3}),n.getList())})}}}},l=(n("CE3F"),n("KHd+")),r=Object(l.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userManager"},[n("div",{staticClass:"filter-container"},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{icon:"el-icon-circle-plus",type:"warning"},on:{click:e.openAddDataDialog}},[e._v("添加")])],1),e._v(" "),n("div",{staticClass:"table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.listData,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"序号",type:"index",index:1,width:"80px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"姓名",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"职位角色",align:"center",width:"350px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[n("el-select",{staticClass:"edit-select",staticStyle:{width:"200px"},attrs:{multiple:"",placeholder:"请选择职位角色",size:"mini"},model:{value:t.row.roleIds,callback:function(n){e.$set(t.row,"roleIds",n)},expression:"scope.row.roleIds"}},e._l(e.allRolesList,function(e,o){return n("el-option",{key:"roles"+t.row.id+o,attrs:{label:e.roleName,value:e.id}})})),e._v(" "),n("el-button",{staticClass:"edit-cancel",attrs:{size:"mini",icon:"el-icon-refresh",type:"warning"},on:{click:function(n){e.cancelEdit(t.row)}}},[e._v("取消")])]:n("span",{staticClass:"textHidden"},[e._v(e._s(t.row.roleNames))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"登录账号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.email))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"工作手机",width:"250px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.phone))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"使用状态",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?n("el-tag",[e._v(e._s(e._f("statusFilters")(t.row.status)))]):n("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e._f("statusFilters")(t.row.status)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-circle-check-outline"},on:{click:function(n){e.confirmEdit(t.row)}}},[e._v("保存")]):n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("编辑")]),e._v(" "),1!=t.row.status?n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(n){e.handleModifyStatus(t.row,"up")}}},[e._v("启用")]):e._e(),e._v(" "),1==t.row.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleModifyStatus(t.row,"down")}}},[e._v("停用")]):e._e()]}}])})],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.pageNum,limit:e.listQuery.pageSize},on:{"update:page":function(t){e.$set(e.listQuery,"pageNum",t)},"update:limit":function(t){e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}})],1),e._v(" "),n("div",{staticClass:"dialog"},[n("el-dialog",{attrs:{title:"添加",width:"500px",visible:e.addDialog},on:{"update:visible":function(t){e.addDialog=t}}},[n("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"工作手机：",prop:"phone"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:"11",placeholder:"请输入工作手机"},model:{value:e.addForm.phone,callback:function(t){e.$set(e.addForm,"phone",t)},expression:"addForm.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"职位角色：",prop:"roleIds"}},[n("el-select",{staticStyle:{width:"300px"},attrs:{multiple:"",placeholder:"请选择职位角色"},model:{value:e.addForm.roleIds,callback:function(t){e.$set(e.addForm,"roleIds",t)},expression:"addForm.roleIds"}},e._l(e.allRolesList,function(e,t){return n("el-option",{key:"role"+t,attrs:{label:e.roleName,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"登录账号：",prop:"email"}},[n("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",placeholder:"请选择登录账号"},model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}},e._l(e.emailList,function(e){return n("el-option",{key:e.uid,attrs:{label:e.uid,value:e.uid}})}))],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addDialog=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addData}},[e._v("确 定")])],1)],1)],1)])},[],!1,null,"29c84e45",null);r.options.__file="userManager.vue";t.default=r.exports}}]);