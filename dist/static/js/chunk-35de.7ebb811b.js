(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-35de"],{IGhB:function(t,e,n){"use strict";var i=n("YpCo");n.n(i).a},LRLM:function(t,e,n){"use strict";n.r(e);var i=n("ZySA"),o=n("Mz3J"),a=n("Q2AE"),r={inserted:function(t,e,n){var i=e.value,o=a.a.getters&&a.a.getters.roles;if(!(i&&i instanceof Array&&i.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var r=i;o.some(function(t){return r.includes(t)})||t.parentNode&&t.parentNode.removeChild(t)}},s=function(t){t.directive("permission",r)};window.Vue&&(window.permission=r,Vue.use(s)),r.install=s;var l=r,d=n("U01L"),c={components:{Pagination:o.a},directives:{waves:i.a,permission:l},data:function(){return{data:[],listLoading:!1,listData:[],total:0,listQuery:{pageNum:1,pageSize:10},addForm:{roleName:"",roleCode:"",permissionIds:[]},addDialog:!1,addDialogTitle:""}},created:function(){this.getList(),this.getPermissionsList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(d.k)().then(function(e){0==e.code&&(t.listData=e.data,t.listLoading=!1)}).catch(function(e){t.listLoading=!1})},getPermissionsList:function(){var t=this;Object(d.h)().then(function(e){0==e.code&&(t.data=e.data)})},resetForm:function(){this.addForm={roleName:"",roleCode:"",permissionIds:[]}},openAddDataDialog:function(){this.resetForm(),this.addDialog=!0,this.addDialogTitle="create"},openEditDataDialog:function(t){var e=this;this.resetForm(),this.addDialog=!0,this.addDialogTitle="edit",this.addForm.roleId=t.id,this.addForm.roleName=t.roleName;var n={roleId:t.id};Object(d.i)(n).then(function(t){if(0==t.code)for(var n=0;n<t.data.length;n++)e.addForm.permissionIds.push(t.data[n].id)})},addData:function(){var t=this;Object(d.l)(this.addForm).then(function(e){0==e.code&&(t.$notify({title:"成功",message:"角色添加成功",type:"success",duration:1e3}),t.addDialog=!1,t.getList())})},editData:function(){var t=this,e={permissionIds:this.addForm.permissionIds,roleId:this.addForm.roleId};Object(d.j)(e).then(function(e){0==e.code&&(t.$notify({title:"成功",message:"保存成功",type:"success",duration:1e3}),t.addDialog=!1,t.getList())})},handleModifyStatus:function(t,e){var n=this;if("up"==e){var i={id:t.id,status:1};Object(d.n)(i).then(function(t){0==t.code&&(n.$notify({title:"成功",message:"启用成功",type:"success",duration:1e3}),n.getList())})}if("down"==e){var o={id:t.id,status:0};Object(d.n)(o).then(function(t){0==t.code&&(n.$notify({title:"成功",message:"停用成功",type:"success",duration:1e3}),n.getList())})}}}},u=(n("rAlh"),n("IGhB"),n("KHd+")),f=Object(u.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"roleManager"},[n("div",{staticClass:"filter-container"},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{icon:"el-icon-circle-plus",type:"warning"},on:{click:t.openAddDataDialog}},[t._v("添加")])],1),t._v(" "),n("div",{staticClass:"table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.listData,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"序号",type:"index",index:1,width:"80px",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"角色名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.roleName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"角色Code",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.roleCode))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"使用状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?n("el-tag",[t._v(t._s(t._f("statusFilters")(e.row.status)))]):n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(t._f("statusFilters")(e.row.status)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){t.openEditDataDialog(e.row)}}},[t._v("编辑")]),t._v(" "),1!=e.row.status?n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(n){t.handleModifyStatus(e.row,"up")}}},[t._v("启用")]):t._e(),t._v(" "),1==e.row.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleModifyStatus(e.row,"down")}}},[t._v("停用")]):t._e()]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.pageNum,limit:t.listQuery.pageSize},on:{"update:page":function(e){t.$set(t.listQuery,"pageNum",e)},"update:limit":function(e){t.$set(t.listQuery,"pageSize",e)},pagination:t.getList}})],1),t._v(" "),n("div",{staticClass:"dialog"},[n("el-dialog",{attrs:{title:"create"==t.addDialogTitle?"添加":"编辑",width:"700px",visible:t.addDialog},on:{"update:visible":function(e){t.addDialog=e}}},[n("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"120px"}},["create"==t.addDialogTitle?n("el-form-item",{attrs:{label:"角色名称：",prop:"roleName"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入角色名称"},model:{value:t.addForm.roleName,callback:function(e){t.$set(t.addForm,"roleName",e)},expression:"addForm.roleName"}})],1):t._e(),t._v(" "),"create"==t.addDialogTitle?n("el-form-item",{attrs:{label:"角色Code：",prop:"roleName"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入角色Code"},model:{value:t.addForm.roleCode,callback:function(e){t.$set(t.addForm,"roleCode",e)},expression:"addForm.roleCode"}})],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"选择权限：",prop:"permissionIds"}},[n("el-transfer",{attrs:{props:{key:"id",label:"permissionName"},data:t.data,titles:["全部权限",t.addForm.roleName?t.addForm.roleName:"角色"]},model:{value:t.addForm.permissionIds,callback:function(e){t.$set(t.addForm,"permissionIds",e)},expression:"addForm.permissionIds"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.addDialog=!1}}},[t._v("取 消")]),t._v(" "),"create"==t.addDialogTitle?n("el-button",{attrs:{type:"primary"},on:{click:t.addData}},[t._v("确 定")]):n("el-button",{attrs:{type:"primary"},on:{click:t.editData}},[t._v("确 定")])],1)],1)],1)])},[],!1,null,"2f40319c",null);f.options.__file="roleManager.vue";e.default=f.exports},U01L:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return l}),n.d(e,"a",function(){return d}),n.d(e,"m",function(){return c}),n.d(e,"k",function(){return u}),n.d(e,"l",function(){return f}),n.d(e,"n",function(){return p}),n.d(e,"h",function(){return m}),n.d(e,"e",function(){return v}),n.d(e,"f",function(){return g}),n.d(e,"g",function(){return h}),n.d(e,"i",function(){return b}),n.d(e,"j",function(){return w});var i=n("DG18"),o=n("Qyje"),a=n.n(o);function r(t){return Object(i.b)("/opUser/index",t)}function s(t){return Object(i.b)("/opUser/save",t)}function l(t){return Object(i.b)("/opUser/status",t)}function d(t){return Object(i.a)("/opUser/allLdapUsers",t)}function c(t){return Object(i.b)("/role/saveUserRoles",t)}function u(t){return Object(i.a)("/role/allRoles",t)}function f(t){return Object(i.b)("/role/save",t)}function p(t){return Object(i.b)("/role/updateStatus",t)}function m(t){return Object(i.a)("/permission/allPermissions",t)}function v(t){return Object(i.b)("/performance/index",t)}function g(t){var e=a.a.stringify(t);return Object(i.b)("/performance/person/detail",e)}function h(t){return Object(i.b)("/performance/person/index",t)}function b(t){return Object(i.a)("/permission/obtainPermissions",t)}function w(t){return Object(i.b)("/permission/saveRolePermissions",t)}},Y5bG:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),Math.easeInOutQuad=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e};var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function o(t,e,n){var o=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,a=t-o,r=0;e=void 0===e?500:e;!function t(){r+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(r,o,a,e)),r<e?i(t):n&&"function"==typeof n&&n()}()}},YpCo:function(t,e,n){},ZySA:function(t,e,n){"use strict";var i=n("P2sY"),o=n.n(i),a=(n("jUE0"),{bind:function(t,e){t.addEventListener("click",function(n){var i=o()({},e.value),a=o()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),r=a.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var s=r.getBoundingClientRect(),l=r.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(s.width,s.height)+"px",r.appendChild(l)),a.type){case"center":l.style.top=s.height/2-l.offsetHeight/2+"px",l.style.left=s.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(n.pageY-s.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(n.pageX-s.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=a.color,l.className="waves-ripple z-active",!1}},!1)}}),r=function(t){t.directive("waves",a)};window.Vue&&(window.waves=a,Vue.use(r)),a.install=r;e.a=a},jUE0:function(t,e,n){},rAlh:function(t,e,n){"use strict";var i=n("tVr6");n.n(i).a},tVr6:function(t,e,n){}}]);